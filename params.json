{"name":"Visor","body":"               \r\n### What is Visor? \r\nVisor is a bridge API to help [Groovy](http://groovy.codehaus.org/) applications store and search information in [ElasticSearch](http://www.elasticsearch.org).  The intent of this API is to be as low-impact as possible for the user while still providing a high level of available customization.\r\n\r\n### Get Visor\r\n\r\n#### Github\r\n\r\nFork, clone or download this project at its [github page](http://github.com/morologous/visor)\r\n\r\n#### Maven\r\n\r\nVisor artifacts are available on the open source Sonatype repository at https://oss.sonatype.org\r\n```xml\r\n<dependency>\r\n    <groupId>net.yankus</groupId>\r\n    <artifactId>visor</artifactId>\r\n    <version>0.1</version>\r\n</dependency>\r\n```\r\n\r\n### How does Visor work?\r\n\r\nVisor interacts with the ElasticSearch server using the [ElasticSearch Groovy API](http://www.elasticsearch.org/guide/reference/groovy-api/).   Visor is configured using class- and property-level annotations.\r\n\r\nLet's say you have a bean like this:\r\n\r\n```groovy\r\nclass Book {\r\n   def isbn\r\n   def title\r\n   def publishDate\r\n   def author\r\n   def pages\r\n   def categories\r\n}                 \r\n```\r\nTo make this bean searchable using Visor, judiciously add Visor, Id and Field annotations\r\n\r\n```groovy\r\n@Visor(index='books')\r\nclass Book {\r\n   @Id\r\n   def isbn\r\n   @Field\r\n   def title\r\n   @Field(type=Date)\r\n   def publishDate\r\n   @Field\r\n   def author\r\n   @Field\r\n   def pages\r\n   @Field\r\n   def categories\r\n}\r\n```\r\nIn this example, we've annotated the appropriate fields.  One important note is the publishDate field.  To unlock some additional functionality for date searching the type property has been set on the Field annotation.  This hints Visor to watch out for Date data or Date range type searches.  More on that later.\r\n\r\nWhen the Visor annotation is added to the bean several instance methods are added.  These are:\r\n\r\n* **book.index()**   add this object to the index\r\n* **book.search()**   search for objects like this one in the index\r\n* **book.update()**   convenience method for reindexing data, semantically the same as .index()\r\n* **book.delete()**   remove this object (by id) from the index\r\n\r\n#### Putting it all together\r\n\r\nNow that we've configured Visor, we can start working with the index:\r\n\r\n```groovy\r\n// create a representative book\r\ndef book = new Book(isbn:'0-684-84328-5', \r\n                    title:'Visor Style Guide: Dangers and Pitfalls',\r\n                    publishDate: parseDate('2010-01-31'),\r\n                    author: 'Cornelius D. Bagg',\r\n                    pages: 235,\r\n                    categories: ['self-help', 'fashion'])\r\n\r\n// store the book                   \r\nbook.index()\r\n\r\n// search for other books by the same author\r\ndef results = new Book(author:'*D. Bagg').search()\r\n\r\n// print the results\r\nprintln \"$results.count books by Cornelius D. Bagg:\"\r\nresults.list.each {\r\n    println it\r\n}\r\n```\r\n\r\n#### Special Searches\r\n\r\n##### Collections\r\n\r\nVisor can search for beans that match a parameter in a list (like a SQL IN clause).  To perform this kind of search, use the MultiSelect object.  Here is an example:\r\n\r\n```groovy\r\n// search for books in the fashion or fitness category\r\ndef results = new Book(\r\n    categories: new MultiSelect(values:['fashion', 'fitness'])\r\n).search()\r\n\r\n// print the results\r\nprintln \"$results.count books returned from search:\"\r\nresults.list.each {\r\n    println it\r\n}\r\n```\r\n\r\n##### Date Ranges\r\n\r\nVisor can perform Date Range searches as well.  When performing a date range search simply substitute the DateRange object for the Date in the bean.  Here is an example of a 'Between' range query:\r\n\r\n```groovy\r\n// search for books published in 2010.\r\ndef results = new Book(\r\n    publishDate: new DateRange(from: parseDate('2010-01-01'), \r\n                               to:   parseDate('2010-12-31')\r\n).search()\r\n\r\n// print the results\r\nprintln \"$results.count books returned from search:\"\r\nresults.list.each {\r\n    println it\r\n}\r\n```\r\n\r\nFor 'Before' or 'After' simply omit the 'from' property (for 'Before' queries) or the 'to' property (for 'After' queries).  In all cases the search will be inclusive of the 'to' and 'from' dates, so consider the time values provided for the dates accordingly.\r\n\r\n##### Query String\r\n\r\nThe Visor annotation also adds a 'queryString' property to the bean, for free form text searching of the documents in the index.\r\n\r\n```groovy\r\n// search for books with titles\r\ndef results = new Book(queryString:'Pitfalls OR Pratfalls').search()\r\n\r\nprintln \"$results.count books returned from search:\"\r\nresults.list.each {\r\n    println it\r\n}\r\n```\r\n\r\nThe query string syntax adheres to the [Lucene Query Syntax](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html) rules.  By default, the all fields in the document will be searched. \r\n\r\n[![Visor](https://github.com/morologous/visor/raw/master/site/visor.png)](http://morologous.github.com/visor)\r\n\r\n[![Build Status](https://secure.travis-ci.org/morologous/visor.png)](http://travis-ci.org/morologous/visor)","tagline":"Simplistic ElasticSearch Bridge API for Groovy Projects","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}